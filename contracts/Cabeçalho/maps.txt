<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 Maps - Decentralized Mapping Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        #map { 
            height: calc(100vh - 60px);
            width: 100%;
            z-index: 1;
        }
        .location-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        .sidebar {
            transition: all 0.3s ease;
        }
        .web3-badge {
            background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);
        }
        .search-results {
            max-height: 60vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm z-50 fixed top-0 left-0 right-0 h-16 flex items-center px-4">
        <div class="flex items-center w-full">
            <!-- Logo -->
            <div class="flex items-center mr-4">
                <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold mr-2">W3</div>
                <h1 class="text-xl font-bold text-gray-800 hidden md:block">Web3 Maps</h1>
            </div>
            
            <!-- Search Bar -->
            <div class="relative flex-1 max-w-2xl mx-4">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="Search location or Web3 POI" 
                           class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <div class="absolute left-3 top-2.5 text-gray-400">
                        <i class="fas fa-search"></i>
                    </div>
                    <div id="search-clear" class="absolute right-3 top-2.5 text-gray-400 cursor-pointer hidden">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                <div id="search-results" class="search-results absolute left-0 right-0 mt-1 bg-white rounded-lg shadow-lg hidden z-50">
                    <!-- Search results will appear here -->
                </div>
            </div>
            
            <!-- Web3 Wallet Button -->
            <button id="connect-wallet" class="ml-auto bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full text-sm font-medium flex items-center">
                <i class="fas fa-wallet mr-2"></i>
                <span class="hidden md:inline">Connect Wallet</span>
            </button>
            
            <!-- User Menu -->
            <div class="ml-4 relative">
                <button id="user-menu-button" class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-700">
                    <i class="fas fa-user"></i>
                </button>
                <div id="user-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Your Profile</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-16 flex">
        <!-- Sidebar (hidden on mobile by default) -->
        <div id="sidebar" class="sidebar w-0 md:w-80 bg-white shadow-md overflow-hidden">
            <div class="p-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-800">Web3 Locations</h2>
                    <button id="close-sidebar" class="md:hidden text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-gray-500">YOUR WEB3 ACTIVITY</h3>
                        <button class="text-blue-600 text-xs">View All</button>
                    </div>
                    <div class="space-y-2">
                        <div class="p-3 bg-gray-50 rounded-lg flex items-center">
                            <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-3">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">NFT Gallery Verified</p>
                                <p class="text-xs text-gray-500">2 days ago</p>
                            </div>
                        </div>
                        <div class="p-3 bg-gray-50 rounded-lg flex items-center">
                            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium">Earned 5 MAP Tokens</p>
                                <p class="text-xs text-gray-500">1 week ago</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-medium text-gray-500">NEARBY WEB3 SPOTS</h3>
                        <button class="text-blue-600 text-xs">Filter</button>
                    </div>
                    <div class="space-y-2">
                        <div class="p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
                            <div class="flex items-start">
                                <div class="web3-badge w-8 h-8 rounded-full flex items-center justify-center text-white mr-3 mt-1">
                                    <i class="fas fa-landmark text-xs"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Crypto Art Museum</p>
                                    <p class="text-xs text-gray-500">0.5mi · Accepts ETH</p>
                                    <div class="flex items-center mt-1">
                                        <div class="flex text-yellow-400 text-xs">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star-half-alt"></i>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1">(42)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
                            <div class="flex items-start">
                                <div class="web3-badge w-8 h-8 rounded-full flex items-center justify-center text-white mr-3 mt-1">
                                    <i class="fas fa-coffee text-xs"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">Blockchain Cafe</p>
                                    <p class="text-xs text-gray-500">1.2mi · Accepts BTC, ETH</p>
                                    <div class="flex items-center mt-1">
                                        <div class="flex text-yellow-400 text-xs">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="far fa-star"></i>
                                        </div>
                                        <span class="text-xs text-gray-500 ml-1">(128)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="p-3 bg-blue-50 rounded-lg border border-blue-100">
                    <h3 class="text-sm font-medium text-blue-800 mb-1">Earn Crypto for Contributions</h3>
                    <p class="text-xs text-blue-600 mb-2">Verify new locations and earn MAP tokens</p>
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white text-xs py-1.5 px-3 rounded-full">
                        Start Earning
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Map Container -->
        <div class="flex-1 relative">
            <div id="map"></div>
            
            <!-- Map Controls -->
            <div class="absolute top-4 right-4 z-10 space-y-2">
                <button id="current-location" class="w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-location-arrow"></i>
                </button>
                <button id="toggle-sidebar" class="w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center text-gray-700 hover:bg-gray-100 md:hidden">
                    <i class="fas fa-layer-group"></i>
                </button>
                <div class="relative">
                    <button id="map-type" class="w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center text-gray-700 hover:bg-gray-100">
                        <i class="fas fa-map"></i>
                    </button>
                    <div id="map-type-menu" class="hidden absolute right-0 bottom-full mb-2 w-40 bg-white rounded-md shadow-lg py-1 z-50">
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-maptype="roadmap">Default</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-maptype="satellite">Satellite</a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-maptype="terrain">Terrain</a>
                    </div>
                </div>
                <button id="zoom-in" class="w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-plus"></i>
                </button>
                <button id="zoom-out" class="w-10 h-10 bg-white rounded-full shadow-md flex items-center justify-center text-gray-700 hover:bg-gray-100">
                    <i class="fas fa-minus"></i>
                </button>
            </div>
            
            <!-- Bottom Controls -->
            <div class="absolute bottom-4 left-0 right-0 flex justify-center z-10">
                <div class="bg-white rounded-full shadow-md px-4 py-2 flex items-center space-x-2">
                    <button id="directions" class="px-3 py-1 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center">
                        <i class="fas fa-route mr-2"></i>
                        <span>Directions</span>
                    </button>
                    <button id="explore" class="px-3 py-1 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center">
                        <i class="fas fa-compass mr-2"></i>
                        <span>Explore</span>
                    </button>
                    <button id="saved" class="px-3 py-1 rounded-full text-sm font-medium text-gray-700 hover:bg-gray-100 flex items-center">
                        <i class="fas fa-bookmark mr-2"></i>
                        <span>Saved</span>
                    </button>
                    <button id="contribute" class="px-3 py-1 rounded-full text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span>Contribute</span>
                    </button>
                </div>
            </div>
            
            <!-- Current Location Indicator -->
            <div id="current-location-indicator" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 hidden">
                <div class="location-dot w-6 h-6 rounded-full bg-blue-600 border-2 border-white"></div>
            </div>
            
            <!-- Web3 Location Popup (hidden by default) -->
            <div id="location-popup" class="hidden absolute bottom-20 left-1/2 transform -translate-x-1/2 z-50 w-80 bg-white rounded-lg shadow-xl overflow-hidden">
                <div class="relative">
                    <img src="https://images.unsplash.com/photo-1639762681057-408e52192e55?q=80&w=2232&auto=format&fit=crop" alt="Location" class="w-full h-32 object-cover">
                    <div class="absolute top-2 right-2">
                        <button class="w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-sm">
                            <i class="fas fa-bookmark text-gray-600"></i>
                        </button>
                    </div>
                </div>
                <div class="p-4">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h3 class="font-bold text-lg">Crypto Art Museum</h3>
                            <p class="text-sm text-gray-500">0.5mi · Web3 Verified</p>
                        </div>
                        <div class="web3-badge px-2 py-1 rounded-full text-white text-xs font-medium flex items-center">
                            <i class="fas fa-check-circle mr-1"></i>
                            <span>DAO Verified</span>
                        </div>
                    </div>
                    <div class="flex items-center mb-3">
                        <div class="flex text-yellow-400 text-sm mr-2">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <span class="text-xs text-gray-500">(42 reviews)</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-4">The world's first museum dedicated to crypto art and NFTs. Pay with ETH or MAP tokens for admission.</p>
                    <div class="flex space-x-2 mb-4">
                        <span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-700">NFT Gallery</span>
                        <span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-700">Accepts Crypto</span>
                        <span class="px-2 py-1 bg-gray-100 rounded-full text-xs text-gray-700">DAO Owned</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center">
                            <i class="fas fa-directions mr-2"></i>
                            Directions
                        </button>
                        <button class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center">
                            <i class="fab fa-ethereum mr-2"></i>
                            Pay Visit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Web3 Wallet Modal -->
    <div id="wallet-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl w-full max-w-md mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-900">Connect Wallet</h3>
                    <button id="close-wallet-modal" class="text-gray-400 hover:text-gray-500">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <p class="text-sm text-gray-500 mb-6">Connect with one of our available wallet providers or create a new one.</p>
                
                <div class="space-y-3 mb-6">
                    <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                        <div class="flex items-center">
                            <img src="https://cryptologos.cc/logos/metamask-logo.png" alt="MetaMask" class="w-8 h-8 mr-3">
                            <span class="font-medium">MetaMask</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </button>
                    <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                        <div class="flex items-center">
                            <img src="https://cryptologos.cc/logos/trust-wallet-twt-logo.png" alt="Trust Wallet" class="w-8 h-8 mr-3">
                            <span class="font-medium">Trust Wallet</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </button>
                    <button class="w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
                        <div class="flex items-center">
                            <img src="https://cryptologos.cc/logos/coinbase-wallet-cbw-logo.png" alt="Coinbase Wallet" class="w-8 h-8 mr-3">
                            <span class="font-medium">Coinbase Wallet</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </button>
                </div>
                
                <p class="text-xs text-gray-500 text-center">By connecting a wallet, you agree to our <a href="#" class="text-blue-600 hover:underline">Terms of Service</a> and <a href="#" class="text-blue-600 hover:underline">Privacy Policy</a>.</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize the map
        const map = L.map('map').setView([40.7128, -74.0060], 13); // Default to New York
        
        // Add tile layer (OpenStreetMap)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Add Web3 locations markers
        const web3Locations = [
            {
                name: "Crypto Art Museum",
                position: [40.7128, -74.01],
                type: "museum",
                accepts: ["ETH", "MAP"],
                rating: 4.5,
                reviews: 42,
                verified: true
            },
            {
                name: "Blockchain Cafe",
                position: [40.715, -74.003],
                type: "cafe",
                accepts: ["BTC", "ETH"],
                rating: 4.0,
                reviews: 128,
                verified: false
            },
            {
                name: "DAO Community Center",
                position: [40.71, -74.008],
                type: "community",
                accepts: ["ETH", "DAI"],
                rating: 4.8,
                reviews: 36,
                verified: true
            }
        ];
        
        web3Locations.forEach(location => {
            const marker = L.marker(location.position).addTo(map);
            
            // Custom icon based on type
            let iconClass = "fas fa-map-marker-alt";
            let iconColor = "#3B82F6"; // Default blue
            
            if (location.type === "museum") {
                iconClass = "fas fa-landmark";
                iconColor = "#8B5CF6"; // Purple
            } else if (location.type === "cafe") {
                iconClass = "fas fa-coffee";
                iconColor = "#F59E0B"; // Amber
            } else if (location.type === "community") {
                iconClass = "fas fa-users";
                iconColor = "#10B981"; // Emerald
            }
            
            // Create a custom icon with the FA icon inside
            const icon = L.divIcon({
                html: `<div class="relative">
                          <i class="${iconClass} text-white text-lg absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                          <svg width="30" height="30" viewBox="0 0 30 30">
                              <path fill="${iconColor}" d="M15 0C6.7 0 0 6.7 0 15c0 8.3 6.7 15 15 15 8.3 0 15-6.7 15-15C30 6.7 23.3 0 15 0zm0 27C8.4 27 3 21.6 3 15S8.4 3 15 3s12 5.4 12 12-5.4 12-12 12z"/>
                              <circle fill="${iconColor}" cx="15" cy="15" r="8"/>
                          </svg>
                      </div>`,
                className: "custom-icon",
                iconSize: [30, 30],
                iconAnchor: [15, 30],
                popupAnchor: [0, -30]
            });
            
            marker.setIcon(icon);
            
            // Add popup with Web3 info
            marker.bindPopup(`
                <div class="w-48">
                    <h3 class="font-bold text-sm">${location.name}</h3>
                    <div class="flex items-center mt-1">
                        <div class="flex text-yellow-400 text-xs mr-1">
                            ${'<i class="fas fa-star"></i>'.repeat(Math.floor(location.rating))}
                            ${location.rating % 1 ? '<i class="fas fa-star-half-alt"></i>' : ''}
                            ${'<i class="far fa-star"></i>'.repeat(5 - Math.ceil(location.rating))}
                        </div>
                        <span class="text-xs text-gray-500">(${location.reviews})</span>
                    </div>
                    <div class="mt-1">
                        <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">
                            Accepts ${location.accepts.join(", ")}
                        </span>
                        ${location.verified ? '<span class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">DAO Verified</span>' : ''}
                    </div>
                </div>
            `);
            
            // Show full popup when marker is clicked
            marker.on('click', function() {
                document.getElementById('location-popup').classList.remove('hidden');
            });
        });
        
        // UI Interactions
        document.getElementById('connect-wallet').addEventListener('click', function() {
            document.getElementById('wallet-modal').classList.remove('hidden');
        });
        
        document.getElementById('close-wallet-modal').addEventListener('click', function() {
            document.getElementById('wallet-modal').classList.add('hidden');
        });
        
        document.getElementById('user-menu-button').addEventListener('click', function() {
            document.getElementById('user-menu').classList.toggle('hidden');
        });
        
        document.getElementById('toggle-sidebar').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('w-0');
            sidebar.classList.toggle('w-80');
        });
        
        document.getElementById('close-sidebar').addEventListener('click', function() {
            document.getElementById('sidebar').classList.add('w-0');
            document.getElementById('sidebar').classList.remove('w-80');
        });
        
        document.getElementById('map-type').addEventListener('click', function() {
            document.getElementById('map-type-menu').classList.toggle('hidden');
        });
        
        document.getElementById('current-location').addEventListener('click', function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    map.flyTo([position.coords.latitude, position.coords.longitude], 15);
                    
                    // Show current location indicator
                    const indicator = document.getElementById('current-location-indicator');
                    indicator.classList.remove('hidden');
                    
                    // Add a marker at current location
                    if (window.currentLocationMarker) {
                        map.removeLayer(window.currentLocationMarker);
                    }
                    
                    window.currentLocationMarker = L.marker(
                        [position.coords.latitude, position.coords.longitude], 
                        {
                            icon: L.divIcon({
                                html: '<div class="location-dot w-6 h-6 rounded-full bg-blue-600 border-2 border-white"></div>',
                                className: "current-location-icon",
                                iconSize: [24, 24],
                                iconAnchor: [12, 12]
                            })
                        }
                    ).addTo(map);
                    
                    // Hide indicator after animation
                    setTimeout(() => {
                        indicator.classList.add('hidden');
                    }, 2000);
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        });
        
        document.getElementById('zoom-in').addEventListener('click', function() {
            map.zoomIn();
        });
        
        document.getElementById('zoom-out').addEventListener('click', function() {
            map.zoomOut();
        });
        
        // Close popup when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('#location-popup') && !event.target.closest('.leaflet-marker-icon')) {
                document.getElementById('location-popup').classList.add('hidden');
            }
            
            if (!event.target.closest('#user-menu') && !event.target.closest('#user-menu-button')) {
                document.getElementById('user-menu').classList.add('hidden');
            }
            
            if (!event.target.closest('#map-type-menu') && !event.target.closest('#map-type')) {
                document.getElementById('map-type-menu').classList.add('hidden');
            }
        });
        
        // Search functionality
        document.getElementById('search-input').addEventListener('input', function(e) {
            const query = e.target.value.trim();
            const searchResults = document.getElementById('search-results');
            const searchClear = document.getElementById('search-clear');
            
            if (query.length > 0) {
                searchClear.classList.remove('hidden');
                
                // Simulate search results
                const results = [
                    { name: "Crypto Art Museum", type: "museum", address: "123 Blockchain St, New York" },
                    { name: "Blockchain Cafe", type: "cafe", address: "456 Decentralized Ave, New York" },
                    { name: "Web3 Conference Center", type: "conference", address: "789 Smart Contract Ln, New York" }
                ].filter(item => 
                    item.name.toLowerCase().includes(query.toLowerCase()) || 
                    item.address.toLowerCase().includes(query.toLowerCase())
                );
                
                if (results.length > 0) {
                    searchResults.innerHTML = results.map(item => `
                        <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-0">
                            <div class="flex items-start">
                                <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 mr-3 mt-1">
                                    <i class="fas fa-${item.type === 'museum' ? 'landmark' : item.type === 'cafe' ? 'coffee' : 'users'} text-sm"></i>
                                </div>
                                <div>
                                    <p class="text-sm font-medium">${item.name}</p>
                                    <p class="text-xs text-gray-500">${item.address}</p>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    searchResults.classList.remove('hidden');
                } else {
                    searchResults.innerHTML = `
                        <div class="p-4 text-center text-sm text-gray-500">
                            No results found for "${query}"
                        </div>
                    `;
                    searchResults.classList.remove('hidden');
                }
            } else {
                searchClear.classList.add('hidden');
                searchResults.classList.add('hidden');
            }
        });
        
        document.getElementById('search-clear').addEventListener('click', function() {
            document.getElementById('search-input').value = '';
            document.getElementById('search-results').classList.add('hidden');
            this.classList.add('hidden');
        });
        
        // Change map type
        document.querySelectorAll('#map-type-menu a').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const type = this.getAttribute('data-maptype');
                
                // In a real implementation, we would change the map tiles here
                // For this demo, we'll just change the icon
                const mapTypeIcon = document.querySelector('#map-type i');
                
                if (type === 'satellite') {
                    mapTypeIcon.className = 'fas fa-satellite';
                } else if (type === 'terrain') {
                    mapTypeIcon.className = 'fas fa-mountain';
                } else {
                    mapTypeIcon.className = 'fas fa-map';
                }
                
                document.getElementById('map-type-menu').classList.add('hidden');
            });
        });
    </script>
</body>
</html>